---
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import ArrowRight from "phosphor-astro/ArrowRight.astro";

type Props = {
  post: CollectionEntry<"posts">;
};

const { post } = Astro.props;

// Format date
const formatDate = (dateString: string) => {
  const date = new Date(dateString);
  return date.toLocaleDateString("en-US", {
    year: "numeric",
    month: "long",
    day: "numeric",
  });
};
---

<article
  class="card bg-base-100/50 backdrop-blur-sm shadow-sm hover:shadow-2xl hover:-translate-y-1 transition-all duration-300 h-full border border-base-200 overflow-hidden group"
>
  <figure class="relative overflow-hidden aspect-video">
    <a href={`/blog/${post.slug}`} class="block w-full h-full">
      {
        post.data.image && (
          <Image
            src={post.data.image}
            alt={post.data.title}
            width={600}
            height={400}
            class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700 ease-in-out"
          />
        )
      }
      <div
        class="absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
      >
      </div>
    </a>
  </figure>
  <div class="card-body p-6">
    <div
      class="flex items-center gap-2 text-xs font-medium text-base-content/60 mb-3 uppercase tracking-wider"
    >
      <span class="text-primary">{post.data.author}</span>
      <span>â€¢</span>
      <time datetime={post.data.date}>{formatDate(post.data.date)}</time>
    </div>

    <h2
      class="card-title text-xl font-bold mb-3 leading-tight group-hover:text-primary transition-colors"
    >
      <a
        href={`/blog/${post.slug}`}
        class="no-underline text-base-content group-hover:text-primary transition-colors block"
      >
        {post.data.title}
      </a>
    </h2>

    <p class="text-base-content/70 text-sm line-clamp-3 mb-6 flex-grow">
      {post.body}
    </p>

    <div
      class="card-actions justify-between items-center pt-4 border-t border-base-200"
    >
      <a
        href={`/blog/${post.slug}`}
        class="text-sm font-semibold text-primary hover:text-primary-focus flex items-center gap-1 group/btn no-underline"
      >
        Read Article
        <ArrowRight
          class="h-4 w-4 transform group-hover/btn:translate-x-1 transition-transform"
        />
      </a>
    </div>
  </div>
</article>
